<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8" />
    <title>Добави клиент</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="/static/css/app.css" rel="stylesheet" />
    <!-- Sidebar Styles -->
    <th:block th:replace="~{fragments/sidebar :: sidebarStyles}"></th:block>
</head>
<body>
    <!-- Sidebar Toggle Button (Mobile) -->
    <th:block th:replace="~{fragments/sidebar :: sidebarToggle}"></th:block>
    
    <!-- Sidebar -->
    <th:block th:replace="~{fragments/sidebar :: sidebar}"></th:block>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
    <div class="container-fluid py-4">
<div class="container">
 <div class="row justify-content-center">
 <div class="col-md-8">
 <div class="card">
 <div class="card-header">
 <h4 class="mb-0">
 <i class="bi bi-person-plus"></i> Добави нов клиент
 </h4>
 </div>
 <div class="card-body">
 <form method="POST" action="/add-client">
 <div class="mb-3">
 <label for="name" class="form-label">
 Име <span class="text-danger">*</span>
 </label>
 <input type="text" class="form-control" id="name" name="name"
 required maxlength="255"

 placeholder="Въведете пълното име на клиента" />
 <div class="form-text">Задължително поле</div>
 </div>

 <div class="row">
 <div class="col-md-6">
 <div class="mb-3">
 <label for="phone" class="form-label">
 <i class="bi bi-telephone"></i> Телефон
 </label>
 <input type="tel" class="form-control" id="phone" name="phone"
 maxlength="50"
 placeholder="Например: +359 888 123 456" />
 <div class="form-text">Незадължително поле</div>
 </div>
 </div>
 <div class="col-md-6">
 <div class="mb-3">
 <label for="email" class="form-label">
 <i class="bi bi-envelope"></i> Имейл
 </label>
 <input type="email" class="form-control" id="email" name="email"
 maxlength="255"
 placeholder="Например: client@example.com" />
 <div class="form-text">Незадължително поле</div>
 </div>
 </div>
 </div>

 <div class="mb-3">
 <label for="notes" class="form-label">
 <i class="bi bi-sticky"></i> Бележки
 </label>
 <textarea class="form-control" id="notes" name="notes" rows="3"
 placeholder="Допълнителна информация за клиента..."></textarea>
 <div class="form-text">Незадължително поле за допълнителна информация</div>
 </div>

 <div class="d-grid gap-2 d-md-flex justify-content-md-end">
 <a href="/clients" class="btn btn-secondary">
 <i class="bi bi-x"></i> Отказ
 </a>
 <button type="submit" class="btn btn-success">
 <i class="bi bi-save"></i> Запази клиент
 </button>
 </div>
 </form>
 </div>
 </div>

 <!-- Помощна информация -->
 <div class="card mt-3">
 <div class="card-body">
 <h6 class="card-title">
 <i class="bi bi-info-circle text-info"></i> Полезна информация
 </h6>
 <ul class="mb-0">
 <li>Само полето <strong>"Име"</strong> е задължително</li>
 <li>Телефонът и имейлът ще бъдат използвани за контакт с клиента</li>
 <li>В бележките можете да добавите допълнителна информация</li>
 <li>След създаване на клиента, можете да го свържете с покупки</li>
 </ul>
 </div>
 </div>
 </div>
 </div>
</div>
 </div>

 <div>
<script>
// Валидация на формата
document.addEventListener('DOMContentLoaded', function() {
 const form = document.querySelector('form');
 const nameInput = document.getElementById('name');
 const phoneInput = document.getElementById('phone');
 const emailInput = document.getElementById('email');

 // Валидация на име
 nameInput.addEventListener('blur', function() {
 if (this.value.trim().length < 2) {
 this.classList.add('is-invalid');
 } else {
 this.classList.remove('is-invalid');
 this.classList.add('is-valid');
 }
 });

 // Валидация на телефон
 phoneInput.addEventListener('blur', function() {
 if (this.value && this.value.trim().length < 6) {
 this.classList.add('is-invalid');
 } else {
 this.classList.remove('is-invalid');
 if (this.value) this.classList.add('is-valid');
 }
 });

 // Валидация на имейл
 emailInput.addEventListener('blur', function() {
 const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
 if (this.value && !emailPattern.test(this.value)) {
 this.classList.add('is-invalid');
 } else {
 this.classList.remove('is-invalid');
 if (this.value) this.classList.add('is-valid');
 }
 });

 // Валидация при изпращане
 form.addEventListener('submit', function(e) {
 const name = nameInput.value.trim();

 if (name.length < 2) {
 e.preventDefault();
 nameInput.classList.add('is-invalid');
 nameInput.focus();
 alert('Моля въведете валидно име (минимум 2 символа)');
 }
 });
    });
    </script>
    </div>
    </div> <!-- End main-content -->
    
    <!-- Sidebar Script -->
    <th:block th:replace="~{fragments/sidebar :: sidebarScript}"></th:block>
</body>
</html>
